---

- hosts: all
  become: true

  vars:

    servers:
      - server1: sdcgisazapmdw09
        server2: 10.193.177.97
        port: 90
      

  tasks: 

        - name: block 2
          #shell: nc {{ item.server2 }} {{ item.port }}
          wait_for: host={{ item.server2 }} port={{ item.port }} timeout=2
          ignore_errors: True
          register: out
          when: item.server1 == ansible_hostname
          with_items: "{{ servers }}" 


        - debug: var=out
